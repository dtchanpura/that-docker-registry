var app=function(){"use strict";function t(){}function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t,e){for(var n in e)t[n]=1;return t}function r(t,e){return 0===e&&t(),()=>{--e||t()}}function i(t){t()}function o(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n)}function a(t){t.parentNode.removeChild(t)}function c(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function g(){return document.createComment("")}function h(t,e,n,r){t.addEventListener(e,n,r)}function l(t,e,n,r){t.removeEventListener(e,n,r)}function m(t,e){t.data=""+e}function f(t,e,n){t.style.setProperty(e,n)}function p(t,e,n){t.classList[n?"add":"remove"](e)}function _(){return Object.create(null)}function y(t){t._lock=!0,N(t._beforecreate),N(t._oncreate),N(t._aftercreate),t._lock=!1}function v(t,e){t._handlers=_(),t._slots=_(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}function N(t){for(;t&&t.length;)t.shift()()}var w={destroy:function(e){this.destroy=t,this.fire("destroy"),this.set=t,this._fragment.d(!1!==e),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1){var i=n[r];if(!i.__calling)try{i.__calling=!0,i.call(this,e)}finally{i.__calling=!1}}},on:function(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(e({},t)),this.root._lock||y(this.root)},_recompute:t,_set:function(t){var n=this._state,r={},i=!1;for(var o in t=e(this._staged,t),this._staged={},t)this._differs(t[o],n[o])&&(r[o]=i=!0);i&&(this._state=e(e({},n),t),this._recompute(r,this._state),this._bind&&this._bind(r,this._state),this._fragment&&(this.fire("state",{changed:r,current:this._state,previous:n}),this._fragment.p(r,this._state),this.fire("update",{changed:r,current:this._state,previous:n})))},_stage:function(t){e(this._staged,t)},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};function O(t){v(this,t),this._state=e({},t.data),this._intro=!!t.intro,this._fragment=function(t,e){var n,r,c,g,f,p,_,y,v,N;function w(n){t.fire("select",{repositoryName:e.repositoryName})}return{c(){n=d("tr"),r=d("td"),c=u(e.repositoryName),g=u("\n  "),f=d("td"),p=d("code"),_=u(e.registryOrigin),y=u("/"),v=u(e.repositoryName),h(r,"click",w)},m(t,e){s(t,n,e),o(n,r),o(r,c),o(n,g),o(n,f),o(f,p),o(p,_),o(p,y),o(p,v),N=!0},p(t,n){e=n,t.repositoryName&&m(c,e.repositoryName),t.registryOrigin&&m(_,e.registryOrigin),t.repositoryName&&m(v,e.repositoryName)},i(t,e){N||this.m(t,e)},o:i,d(t){t&&a(n),l(r,"click",w)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor)),this._intro=!0}e(O.prototype,w);var b={sort(){const{items:t,descending:e}=this.get();e?t.sort().reverse():t.sort(),this.set({items:t,descending:!e})}};function D(t,e,n){const r=Object.create(t);return r.repositoryName=e[n],r}function k(e,n){var r,o;return{c(){(r=d("tr")).innerHTML='<td colspan="2">loading images...</td>'},m(t,e){s(t,r,e),o=!0},p:t,i(t,e){o||this.m(t,e)},o:i,d(t){t&&a(r)}}}function B(t,e){for(var n,i,o=e.items,d=[],u=0;u<o.length;u+=1)d[u]=T(t,D(e,o,u));function h(t,e,n){d[t]&&d[t].o(()=>{e&&(d[t].d(e),d[t]=null),n&&n()})}return{c(){for(var t=0;t<d.length;t+=1)d[t].c();n=g()},m(t,e){for(var r=0;r<d.length;r+=1)d[r].i(t,e);s(t,n,e),i=!0},p(e,r){if(e.registryOrigin||e.items){o=r.items;for(var i=0;i<o.length;i+=1){const s=D(r,o,i);d[i]?d[i].p(e,s):(d[i]=T(t,s),d[i].c()),d[i].i(n.parentNode,n)}for(;i<d.length;i+=1)h(i,1)}},i(t,e){i||this.m(t,e)},o(t){if(!i)return;const e=r(t,(d=d.filter(Boolean)).length);for(let t=0;t<d.length;t+=1)h(t,0,e);i=!1},d(t){c(d,t),t&&a(n)}}}function T(t,e){var n,r={registryOrigin:e.registryOrigin,repositoryName:e.repositoryName},i=new O({root:t.root,store:t.store,data:r});return i.on("select",function(n){t.fire("select",{repositoryName:e.repositoryName})}),{c(){i._fragment.c()},m(t,e){i._mount(t,e),n=!0},p(t,n){e=n;var r={};t.registryOrigin&&(r.registryOrigin=e.registryOrigin),t.items&&(r.repositoryName=e.repositoryName),i._set(r)},i(t,e){n||this.m(t,e)},o(t){n&&(i&&i._fragment.o(t),n=!1)},d(t){i.destroy(t)}}}function I(t){v(this,t),this._state=e({items:null,registryOrigin:null,descending:null},t.data),this._intro=!!t.intro,this._fragment=function(t,e){var n,r,i,c,g,m,_,y,v,N,w,O,b;function D(e){t.sort()}var T=[B,k],I=[];function L(t){return t.items?0:1}return w=L(e),O=I[w]=T[w](t,e),{c(){n=d("table"),r=d("thead"),i=d("tr"),c=d("th"),g=u("Repository Name "),m=d("span"),_=u("\n\t\t\t\t"),(y=d("th")).textContent="Image URL",v=u("\n\n\t\t"),N=d("tbody"),O.c(),f(m,"line-height","1px"),p(m,"hidden",null==e.descending),p(m,"arrow-down",e.descending),p(m,"arrow-up",!e.descending),h(c,"click",D),n.className="u-full-width"},m(t,e){s(t,n,e),o(n,r),o(r,i),o(i,c),o(c,g),o(c,m),o(i,_),o(i,y),o(n,v),o(n,N),I[w].m(N,null),b=!0},p(e,n){e.descending&&(p(m,"hidden",null==n.descending),p(m,"arrow-down",n.descending),p(m,"arrow-up",!n.descending));var r=w;(w=L(n))===r?I[w].p(e,n):(O.o(function(){I[r].d(1),I[r]=null}),(O=I[w])||(O=I[w]=T[w](t,n)).c(),O.m(N,null))},i(t,e){b||this.m(t,e)},o(t){b&&(O?O.o(t):t(),b=!1)},d(t){t&&a(n),l(c,"click",D),I[w].d()}}}(this,this._state),this.root._oncreate.push(()=>{(async function(){var t="";const{descending:e}=this.get();var n=(await fetch("/v2/_catalog").then(function(e){return t=e.headers.get("Docker-Distribution-Api-Version"),e.json()})).repositories;this.fire("version",{version:t}),this.set({registryOrigin:window.location.host,items:n})}).call(this),this.fire("update",{changed:n({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),y(this)),this._intro=!0}function L(e,n){var r;return{c(){(r=d("td")).textContent="..."},m(t,e){s(t,r,e)},p:t,d(t){t&&a(r)}}}function x(t,e){var n,r,i,c,g,h,l,f,p,_,y,v,N,w,O,b=e.tag.repositoryName,D=e.tag.tagName,k=e.tag.imageID.substr(7,12),B=e.tag.sinceTime;return{c(){n=d("td"),r=u(b),i=u("\n  "),c=d("td"),g=d("code"),h=u(D),l=u("\n  "),f=d("td"),p=d("code"),_=u(k),v=u("\n  "),N=d("td"),w=u(B),f.title=y=e.tag.imageID,N.title=O=e.tag.createdAt},m(t,e){s(t,n,e),o(n,r),s(t,i,e),s(t,c,e),o(c,g),o(g,h),s(t,l,e),s(t,f,e),o(f,p),o(p,_),s(t,v,e),s(t,N,e),o(N,w)},p(t,e){t.tag&&b!==(b=e.tag.repositoryName)&&m(r,b),t.tag&&D!==(D=e.tag.tagName)&&m(h,D),t.tag&&k!==(k=e.tag.imageID.substr(7,12))&&m(_,k),t.tag&&y!==(y=e.tag.imageID)&&(f.title=y),t.tag&&B!==(B=e.tag.sinceTime)&&m(w,B),t.tag&&O!==(O=e.tag.createdAt)&&(N.title=O)},d(t){t&&(a(n),a(i),a(c),a(l),a(f),a(v),a(N))}}}function A(t){v(this,t),this._state=e({},t.data),this._intro=!!t.intro,this._fragment=function(t,e){var n,r;function o(t){return t.tag?x:L}var c=o(e),u=c(t,e);return{c(){n=d("tr"),u.c()},m(t,e){s(t,n,e),u.m(n,null),r=!0},p(e,r){c===(c=o(r))&&u?u.p(e,r):(u.d(1),(u=c(t,r)).c(),u.m(n,null))},i(t,e){r||this.m(t,e)},o:i,d(t){t&&a(n),u.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor)),this._intro=!0}function C(t){const e=new Date,n=[["second",1],["minute",60],["hour",3600],["day",86400],["week",604800],["month",2592e3],["year",31536e3]];for(var r=Math.round((e-t)/1e3),i=0;i<n.length;i++)if(r<n[i][1])return 0==i?"Just now":(r=Math.round(r/n[i-1][1]))+" "+n[i-1][0]+(1==r?" ago":"s ago")}e(I.prototype,w),e(I.prototype,b),e(A.prototype,w);var U={sort(t){const{tags:e,descending:n,orderBy:r}=this.get();var i=!0;n&&t==r&&(i=!1),e.sort(function(e,n){return i?n[t]>e[t]:n[t]<=e[t]}),this.set({tags:e,orderBy:t,descending:i})}};function j(t,e,n){const r=Object.create(t);return r.tag=e[n],r}function V(t,e){var n,r,c,g,h,l,f,p,_,y,v=new e.Date(0);return{c(){n=d("tr"),(r=d("td")).textContent="loading tags...",c=u("\n      "),(g=d("td")).innerHTML="<code>...</code>",h=u("\n      "),(l=d("td")).innerHTML="<code>000000000000</code>",f=u("\n      "),p=d("td"),_=u(v)},m(t,e){s(t,n,e),o(n,r),o(n,c),o(n,g),o(n,h),o(n,l),o(n,f),o(n,p),o(p,_),y=!0},p(t,e){t.Date&&v!==(v=new e.Date(0))&&m(_,v)},i(t,e){y||this.m(t,e)},o:i,d(t){t&&a(n)}}}function M(t,e){for(var n,i,o=e.tags,d=[],u=0;u<o.length;u+=1)d[u]=R(t,j(e,o,u));function h(t,e,n){d[t]&&d[t].o(()=>{e&&(d[t].d(e),d[t]=null),n&&n()})}return{c(){for(var t=0;t<d.length;t+=1)d[t].c();n=g()},m(t,e){for(var r=0;r<d.length;r+=1)d[r].i(t,e);s(t,n,e),i=!0},p(e,r){if(e.tags){o=r.tags;for(var i=0;i<o.length;i+=1){const s=j(r,o,i);d[i]?d[i].p(e,s):(d[i]=R(t,s),d[i].c()),d[i].i(n.parentNode,n)}for(;i<d.length;i+=1)h(i,1)}},i(t,e){i||this.m(t,e)},o(t){if(!i)return;const e=r(t,(d=d.filter(Boolean)).length);for(let t=0;t<d.length;t+=1)h(t,0,e);i=!1},d(t){c(d,t),t&&a(n)}}}function R(t,e){var n,r,i={tag:e.tag},o=new A({root:t.root,store:t.store,data:i});return{c(){o._fragment.c(),n=u("\n    ")},m(t,e){o._mount(t,e),s(t,n,e),r=!0},p(t,e){var n={};t.tags&&(n.tag=e.tag),o._set(n)},i(t,e){r||this.m(t,e)},o(t){r&&(o&&o._fragment.o(t),r=!1)},d(t){o.destroy(t),t&&a(n)}}}function z(t){v(this,t),this._state=e(e({Date:Date},{tags:null,descending:null,orderBy:null,registryOrigin:window.location.host,lastUpdatedOn:{date:null,humanize:"Never"}}),t.data),this._intro=!!t.intro,this._fragment=function(t,e){var n,r,i,c,g,_,y,v,N,w,O,b,D,k,B,T,I,L,x,A,C,U,j,R,z,H,E,P,J,q,F,G,K,Q,S,W,X,Y,Z,$,tt,et,nt,rt,it,ot,st,at,ct,dt=e.lastUpdatedOn.humanize;function ut(e){t.fire("select",null)}function gt(e){t.sort("tagName")}function ht(e){t.sort("imageID")}function lt(e){t.sort("createdAt")}var mt=[M,V],ft=[];function pt(t){return t.tags?0:1}return st=pt(e),at=ft[st]=mt[st](t,e),{c(){(n=d("button")).innerHTML='<span class="arrow-left"></span> Back',r=u("\n\n"),i=d("div"),c=d("div"),g=d("h5"),_=u(e.repositoryName),y=u("\n    "),(v=d("span")).textContent="Last updated:",N=u("\n    "),w=d("span"),O=u(dt),D=u("\n  "),k=d("div"),(B=d("h6")).textContent="Docker Commands",T=u("\n    "),I=d("pre"),L=d("code"),x=u("# Pulling the image\ndocker pull "),A=u(e.registryOrigin),C=u("/"),U=u(e.repositoryName),j=u(":tagname\n# Pushing the image\ndocker push "),R=u(e.registryOrigin),z=u("/"),H=u(e.repositoryName),E=u(":tagname"),P=u("\n\n"),J=d("table"),q=d("thead"),F=d("tr"),(G=d("th")).textContent="Image Name",K=u("\n      "),Q=d("th"),S=u("Tag "),W=d("span"),X=u("\n      "),Y=d("th"),Z=u("Image ID "),$=d("span"),tt=u("\n      "),et=d("th"),nt=u("Created at "),rt=d("span"),it=u("\n\n  "),ot=d("tbody"),at.c(),h(n,"click",ut),n.className="button",f(n,"font-weight","bolder"),v.className="detail-header",w.title=b=e.lastUpdatedOn.date,c.className="four columns",B.className="detail-header",k.className="eight columns",i.className="row",f(W,"line-height","1px"),p(W,"hidden","tagName"!=e.orderBy),p(W,"arrow-down",e.descending),p(W,"arrow-up",!e.descending),h(Q,"click",gt),p($,"hidden","imageID"!=e.orderBy),p($,"arrow-down",e.descending),p($,"arrow-up",!e.descending),h(Y,"click",ht),p(rt,"hidden","createdAt"!=e.orderBy),p(rt,"arrow-down",e.descending),p(rt,"arrow-up",!e.descending),h(et,"click",lt),J.className="u-full-width"},m(t,e){s(t,n,e),s(t,r,e),s(t,i,e),o(i,c),o(c,g),o(g,_),o(c,y),o(c,v),o(c,N),o(c,w),o(w,O),o(i,D),o(i,k),o(k,B),o(k,T),o(k,I),o(I,L),o(L,x),o(L,A),o(L,C),o(L,U),o(L,j),o(L,R),o(L,z),o(L,H),o(L,E),s(t,P,e),s(t,J,e),o(J,q),o(q,F),o(F,G),o(F,K),o(F,Q),o(Q,S),o(Q,W),o(F,X),o(F,Y),o(Y,Z),o(Y,$),o(F,tt),o(F,et),o(et,nt),o(et,rt),o(J,it),o(J,ot),ft[st].m(ot,null),ct=!0},p(e,n){ct&&!e.repositoryName||m(_,n.repositoryName),ct&&!e.lastUpdatedOn||dt===(dt=n.lastUpdatedOn.humanize)||m(O,dt),ct&&!e.lastUpdatedOn||b===(b=n.lastUpdatedOn.date)||(w.title=b),ct&&!e.registryOrigin||m(A,n.registryOrigin),ct&&!e.repositoryName||m(U,n.repositoryName),ct&&!e.registryOrigin||m(R,n.registryOrigin),ct&&!e.repositoryName||m(H,n.repositoryName),e.orderBy&&p(W,"hidden","tagName"!=n.orderBy),e.descending&&(p(W,"arrow-down",n.descending),p(W,"arrow-up",!n.descending)),e.orderBy&&p($,"hidden","imageID"!=n.orderBy),e.descending&&(p($,"arrow-down",n.descending),p($,"arrow-up",!n.descending)),e.orderBy&&p(rt,"hidden","createdAt"!=n.orderBy),e.descending&&(p(rt,"arrow-down",n.descending),p(rt,"arrow-up",!n.descending));var r=st;(st=pt(n))===r?ft[st].p(e,n):(at.o(function(){ft[r].d(1),ft[r]=null}),(at=ft[st])||(at=ft[st]=mt[st](t,n)).c(),at.m(ot,null))},i(t,e){ct||this.m(t,e)},o(t){ct&&(at?at.o(t):t(),ct=!1)},d(t){t&&a(n),l(n,"click",ut),t&&(a(r),a(i),a(P),a(J)),l(Q,"click",gt),l(Y,"click",ht),l(et,"click",lt),ft[st].d()}}}(this,this._state),this.root._oncreate.push(()=>{(async function(){const t=[];var e="",n=new Date(0);const{repositoryName:r}=this.get(),i=await fetch("/v2/"+r+"/tags/list").then(function(t){return e=t.headers.get("Docker-Distribution-Api-Version"),console.log(e),t.json()});for(var o=0;o<i.tags.length;o++){const e=i.tags[o];await fetch("/v2/"+r+"/manifests/"+e,{headers:{Accept:"application/vnd.docker.distribution.manifest.v2+json"}}).then(t=>t.json()).then(function(i){return fetch("/v2/"+r+"/blobs/"+i.config.digest,{headers:{Accept:i.config.mediaType}}).then(t=>t.json()).then(function(o){var s={tagName:e,repositoryName:r,imageID:i.config.digest,createdAt:new Date(o.created),sinceTime:C(new Date(o.created))};return n<s.createdAt&&(n=s.createdAt),t.push(s),s})})}this.fire("version",{version:e}),this.set({tags:t,lastUpdatedOn:{date:n,humanize:C(n)}})}).call(this),this.fire("update",{changed:n({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),y(this)),this._intro=!0}e(z.prototype,w),e(z.prototype,U);var H={itemDetails(t){console.log(t),this.set({isList:!1,repositoryName:t})},version(t){this.set({version:t})},close(){this.set({isList:!0})}};function E(t,e){var n,r={repositoryName:e.repositoryName},i=new z({root:t.root,store:t.store,data:r});return i.on("version",function(e){t.version(e.version)}),i.on("select",function(e){t.close()}),{c(){i._fragment.c()},m(t,e){i._mount(t,e),n=!0},p(t,e){var n={};t.repositoryName&&(n.repositoryName=e.repositoryName),i._set(n)},i(t,e){n||this.m(t,e)},o(t){n&&(i&&i._fragment.o(t),n=!1)},d(t){i.destroy(t)}}}function P(e,n){var r,i=new I({root:e.root,store:e.store});return i.on("version",function(t){e.version(t.version)}),i.on("select",function(t){e.itemDetails(t.repositoryName)}),{c(){i._fragment.c()},m(t,e){i._mount(t,e),r=!0},p:t,i(t,e){r||this.m(t,e)},o(t){r&&(i&&i._fragment.o(t),r=!1)},d(t){i.destroy(t)}}}function J(t){v(this,t),this._state=e({},t.data),this._intro=!!t.intro,this._fragment=function(t,e){var n,r,i,c,g,h,l,f,p,_,y,v,N,w,O,b,D,k,B,T,I,L,x,A,C;document.title=n=e.appTitle;var U=[P,E],j=[];function V(t){return t.isList?0:1}return w=V(e),O=j[w]=U[w](t,e),{c(){r=u("\n\n"),i=d("div"),c=d("div"),g=d("div"),h=d("h1"),l=u(e.name),f=u("\n\t\t"),p=d("div"),_=d("h1"),y=u(e.subtitle),v=u("\n\t"),N=d("div"),O.c(),b=u("\n\n\t"),D=d("div"),k=d("div"),B=u("Registry Version: "),T=d("code"),I=u(e.version),L=u("\n\t\t\tUI Version: "),x=d("code"),A=u(e.uiVersion),g.className="six columns",p.className="six columns",c.className="row",N.className="row",k.className="version-footer",D.className="row",i.className="container"},m(t,e){s(t,r,e),s(t,i,e),o(i,c),o(c,g),o(g,h),o(h,l),o(c,f),o(c,p),o(p,_),o(_,y),o(i,v),o(i,N),j[w].m(N,null),o(i,b),o(i,D),o(D,k),o(k,B),o(k,T),o(T,I),o(k,L),o(k,x),o(x,A),C=!0},p(e,r){C&&!e.appTitle||n===(n=r.appTitle)||(document.title=n),C&&!e.name||m(l,r.name),C&&!e.subtitle||m(y,r.subtitle);var i=w;(w=V(r))===i?j[w].p(e,r):(O.o(function(){j[i].d(1),j[i]=null}),(O=j[w])||(O=j[w]=U[w](t,r)).c(),O.m(N,null)),C&&!e.version||m(I,r.version),C&&!e.uiVersion||m(A,r.uiVersion)},i(t,e){C||this.m(t,e)},o(t){C&&(O?O.o(t):t(),C=!1)},d(t){t&&(a(r),a(i)),j[w].d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),y(this)),this._intro=!0}e(J.prototype,w),e(J.prototype,H);return new J({target:document.body,data:{name:"That Docker Registry",subtitle:"",item:null,isList:!0,appTitle:"That Docker Registry",repositoryName:null,version:"0.0",uiVersion:"1.3.0-dev"}})}();
//# sourceMappingURL=bundle.js.map
