var app=function(){"use strict";function t(){}function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t,e){for(var n in e)t[n]=1;return t}function r(t,e){return 0===e&&t(),()=>{--e||t()}}function i(t){t()}function o(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n)}function a(t){t.parentNode.removeChild(t)}function c(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function h(){return document.createComment("")}function l(t,e,n,r){t.addEventListener(e,n,r)}function g(t,e,n,r){t.removeEventListener(e,n,r)}function f(t,e){t.data=""+e}function m(t,e,n){t.style.setProperty(e,n)}function p(t,e,n){t.classList[n?"add":"remove"](e)}function _(){return Object.create(null)}function v(t){t._lock=!0,N(t._beforecreate),N(t._oncreate),N(t._aftercreate),t._lock=!1}function y(t,e){t._handlers=_(),t._slots=_(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}function N(t){for(;t&&t.length;)t.shift()()}var w={destroy:function(e){this.destroy=t,this.fire("destroy"),this.set=t,this._fragment.d(!1!==e),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1){var i=n[r];if(!i.__calling)try{i.__calling=!0,i.call(this,e)}finally{i.__calling=!1}}},on:function(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(e({},t)),this.root._lock||v(this.root)},_recompute:t,_set:function(t){var n=this._state,r={},i=!1;for(var o in t=e(this._staged,t),this._staged={},t)this._differs(t[o],n[o])&&(r[o]=i=!0);i&&(this._state=e(e({},n),t),this._recompute(r,this._state),this._bind&&this._bind(r,this._state),this._fragment&&(this.fire("state",{changed:r,current:this._state,previous:n}),this._fragment.p(r,this._state),this.fire("update",{changed:r,current:this._state,previous:n})))},_stage:function(t){e(this._staged,t)},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};function b(t){y(this,t),this._state=e({},t.data),this._intro=!!t.intro,this._fragment=function(t,e){var n,r,c,h,m,p,_,v,y,N;function w(n){t.fire("select",{repositoryName:e.repositoryName})}return{c(){n=d("tr"),r=d("td"),c=u(e.repositoryName),h=u("\n  "),m=d("td"),p=d("code"),_=u(e.registryOrigin),v=u("/"),y=u(e.repositoryName),l(r,"click",w)},m(t,e){s(t,n,e),o(n,r),o(r,c),o(n,h),o(n,m),o(m,p),o(p,_),o(p,v),o(p,y),N=!0},p(t,n){e=n,t.repositoryName&&f(c,e.repositoryName),t.registryOrigin&&f(_,e.registryOrigin),t.repositoryName&&f(y,e.repositoryName)},i(t,e){N||this.m(t,e)},o:i,d(t){t&&a(n),g(r,"click",w)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor)),this._intro=!0}e(b.prototype,w);var k={sort(){const{items:t,descending:e}=this.get();e?t.sort().reverse():t.sort(),this.set({items:t,descending:!e})}};function O(t,e,n){const r=Object.create(t);return r.repositoryName=e[n],r}function D(e,n){var r,o;return{c(){(r=d("tr")).innerHTML='<td colspan="2">loading images...</td>'},m(t,e){s(t,r,e),o=!0},p:t,i(t,e){o||this.m(t,e)},o:i,d(t){t&&a(r)}}}function B(t,e){for(var n,i,o=e.items,d=[],u=0;u<o.length;u+=1)d[u]=T(t,O(e,o,u));function l(t,e,n){d[t]&&d[t].o(()=>{e&&(d[t].d(e),d[t]=null),n&&n()})}return{c(){for(var t=0;t<d.length;t+=1)d[t].c();n=h()},m(t,e){for(var r=0;r<d.length;r+=1)d[r].i(t,e);s(t,n,e),i=!0},p(e,r){if(e.registryOrigin||e.items){o=r.items;for(var i=0;i<o.length;i+=1){const s=O(r,o,i);d[i]?d[i].p(e,s):(d[i]=T(t,s),d[i].c()),d[i].i(n.parentNode,n)}for(;i<d.length;i+=1)l(i,1)}},i(t,e){i||this.m(t,e)},o(t){if(!i)return;const e=r(t,(d=d.filter(Boolean)).length);for(let t=0;t<d.length;t+=1)l(t,0,e);i=!1},d(t){c(d,t),t&&a(n)}}}function T(t,e){var n,r={registryOrigin:e.registryOrigin,repositoryName:e.repositoryName},i=new b({root:t.root,store:t.store,data:r});return i.on("select",function(n){t.fire("select",{repositoryName:e.repositoryName})}),{c(){i._fragment.c()},m(t,e){i._mount(t,e),n=!0},p(t,n){e=n;var r={};t.registryOrigin&&(r.registryOrigin=e.registryOrigin),t.items&&(r.repositoryName=e.repositoryName),i._set(r)},i(t,e){n||this.m(t,e)},o(t){n&&(i&&i._fragment.o(t),n=!1)},d(t){i.destroy(t)}}}function x(t){y(this,t),this._state=e({items:null,registryOrigin:null,descending:null},t.data),this._intro=!!t.intro,this._fragment=function(t,e){var n,r,i,c,h,f,_,v,y,N,w,b,k;function O(e){t.sort()}var T=[B,D],x=[];function A(t){return t.items?0:1}return w=A(e),b=x[w]=T[w](t,e),{c(){n=d("table"),r=d("thead"),i=d("tr"),c=d("th"),h=u("Tag "),f=d("span"),_=u("\n\t\t\t\t"),(v=d("th")).textContent="Image Name",y=u("\n\n\t\t"),N=d("tbody"),b.c(),m(f,"line-height","1px"),p(f,"hidden",null==e.descending),p(f,"arrow-down",e.descending),p(f,"arrow-up",!e.descending),l(c,"click",O),n.className="u-full-width"},m(t,e){s(t,n,e),o(n,r),o(r,i),o(i,c),o(c,h),o(c,f),o(i,_),o(i,v),o(n,y),o(n,N),x[w].m(N,null),k=!0},p(e,n){e.descending&&(p(f,"hidden",null==n.descending),p(f,"arrow-down",n.descending),p(f,"arrow-up",!n.descending));var r=w;(w=A(n))===r?x[w].p(e,n):(b.o(function(){x[r].d(1),x[r]=null}),(b=x[w])||(b=x[w]=T[w](t,n)).c(),b.m(N,null))},i(t,e){k||this.m(t,e)},o(t){k&&(b?b.o(t):t(),k=!1)},d(t){t&&a(n),g(c,"click",O),x[w].d()}}}(this,this._state),this.root._oncreate.push(()=>{(async function(){var t="";const{descending:e}=this.get();var n=(await fetch("/v2/_catalog").then(function(e){return t=e.headers.get("Docker-Distribution-Api-Version"),e.json()})).repositories;this.fire("version",{version:t}),this.set({registryOrigin:window.location.host,items:n})}).call(this),this.fire("update",{changed:n({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),v(this)),this._intro=!0}function A(e,n){var r;return{c(){(r=d("td")).textContent="..."},m(t,e){s(t,r,e)},p:t,d(t){t&&a(r)}}}function L(t,e){var n,r,i,c,h,l,g,m,p,_=e.tag.repositoryName,v=e.tag.tagName,y=e.tag.createdAt;return{c(){n=d("td"),r=u(_),i=u("\n  "),c=d("td"),h=d("code"),l=u(v),g=u("\n  "),m=d("td"),p=u(y)},m(t,e){s(t,n,e),o(n,r),s(t,i,e),s(t,c,e),o(c,h),o(h,l),s(t,g,e),s(t,m,e),o(m,p)},p(t,e){t.tag&&_!==(_=e.tag.repositoryName)&&f(r,_),t.tag&&v!==(v=e.tag.tagName)&&f(l,v),t.tag&&y!==(y=e.tag.createdAt)&&f(p,y)},d(t){t&&(a(n),a(i),a(c),a(g),a(m))}}}function j(t){y(this,t),this._state=e({},t.data),this._intro=!!t.intro,this._fragment=function(t,e){var n,r;function o(t){return t.tag?L:A}var c=o(e),u=c(t,e);return{c(){n=d("tr"),u.c()},m(t,e){s(t,n,e),u.m(n,null),r=!0},p(e,r){c===(c=o(r))&&u?u.p(e,r):(u.d(1),(u=c(t,r)).c(),u.m(n,null))},i(t,e){r||this.m(t,e)},o:i,d(t){t&&a(n),u.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor)),this._intro=!0}e(x.prototype,w),e(x.prototype,k),e(j.prototype,w);var C={sort(t){const{tags:e,descending:n,orderBy:r}=this.get();var i=!0;n&&t==r&&(i=!1),e.sort(function(e,n){return i?n[t]>e[t]:n[t]<=e[t]}),this.set({tags:e,orderBy:t,descending:i})}};function V(t,e,n){const r=Object.create(t);return r.tag=e[n],r}function E(t,e){var n,r,c,h,l,g,m,p,_=new e.Date(0);return{c(){n=d("tr"),(r=d("td")).textContent="loading tags...",c=u("\n      "),(h=d("td")).innerHTML="<code>...</code>",l=u("\n      "),g=d("td"),m=u(_)},m(t,e){s(t,n,e),o(n,r),o(n,c),o(n,h),o(n,l),o(n,g),o(g,m),p=!0},p(t,e){t.Date&&_!==(_=new e.Date(0))&&f(m,_)},i(t,e){p||this.m(t,e)},o:i,d(t){t&&a(n)}}}function H(t,e){for(var n,i,o=e.tags,d=[],u=0;u<o.length;u+=1)d[u]=I(t,V(e,o,u));function l(t,e,n){d[t]&&d[t].o(()=>{e&&(d[t].d(e),d[t]=null),n&&n()})}return{c(){for(var t=0;t<d.length;t+=1)d[t].c();n=h()},m(t,e){for(var r=0;r<d.length;r+=1)d[r].i(t,e);s(t,n,e),i=!0},p(e,r){if(e.tags){o=r.tags;for(var i=0;i<o.length;i+=1){const s=V(r,o,i);d[i]?d[i].p(e,s):(d[i]=I(t,s),d[i].c()),d[i].i(n.parentNode,n)}for(;i<d.length;i+=1)l(i,1)}},i(t,e){i||this.m(t,e)},o(t){if(!i)return;const e=r(t,(d=d.filter(Boolean)).length);for(let t=0;t<d.length;t+=1)l(t,0,e);i=!1},d(t){c(d,t),t&&a(n)}}}function I(t,e){var n,r,i={tag:e.tag},o=new j({root:t.root,store:t.store,data:i});return{c(){o._fragment.c(),n=u("\n    ")},m(t,e){o._mount(t,e),s(t,n,e),r=!0},p(t,e){var n={};t.tags&&(n.tag=e.tag),o._set(n)},i(t,e){r||this.m(t,e)},o(t){r&&(o&&o._fragment.o(t),r=!1)},d(t){o.destroy(t),t&&a(n)}}}function M(t){y(this,t),this._state=e(e({Date:Date},{tags:null,descending:null,orderBy:null}),t.data),this._intro=!!t.intro,this._fragment=function(t,e){var n,r,i,c,h,f,_,v,y,N,w,b,k,O,D,B,T,x,A;function L(e){t.fire("select",null)}function j(e){t.sort("tagName")}function C(e){t.sort("createdAt")}var V=[H,E],I=[];function M(t){return t.tags?0:1}return T=M(e),x=I[T]=V[T](t,e),{c(){(n=d("button")).innerHTML='<span class="arrow-left"></span> Back',r=u("\n\n"),i=d("table"),c=d("thead"),h=d("tr"),(f=d("th")).textContent="Image Name",_=u("\n      "),v=d("th"),y=u("Tag "),N=d("span"),w=u("\n      "),b=d("th"),k=u("Created at "),O=d("span"),D=u("\n\n  "),B=d("tbody"),x.c(),l(n,"click",L),n.className="button",m(n,"font-weight","bolder"),m(N,"line-height","1px"),p(N,"hidden","tagName"!=e.orderBy),p(N,"arrow-down",e.descending),p(N,"arrow-up",!e.descending),l(v,"click",j),p(O,"hidden","createdAt"!=e.orderBy),p(O,"arrow-down",e.descending),p(O,"arrow-up",!e.descending),l(b,"click",C),i.className="u-full-width"},m(t,e){s(t,n,e),s(t,r,e),s(t,i,e),o(i,c),o(c,h),o(h,f),o(h,_),o(h,v),o(v,y),o(v,N),o(h,w),o(h,b),o(b,k),o(b,O),o(i,D),o(i,B),I[T].m(B,null),A=!0},p(e,n){e.orderBy&&p(N,"hidden","tagName"!=n.orderBy),e.descending&&(p(N,"arrow-down",n.descending),p(N,"arrow-up",!n.descending)),e.orderBy&&p(O,"hidden","createdAt"!=n.orderBy),e.descending&&(p(O,"arrow-down",n.descending),p(O,"arrow-up",!n.descending));var r=T;(T=M(n))===r?I[T].p(e,n):(x.o(function(){I[r].d(1),I[r]=null}),(x=I[T])||(x=I[T]=V[T](t,n)).c(),x.m(B,null))},i(t,e){A||this.m(t,e)},o(t){A&&(x?x.o(t):t(),A=!1)},d(t){t&&a(n),g(n,"click",L),t&&(a(r),a(i)),g(v,"click",j),g(b,"click",C),I[T].d()}}}(this,this._state),this.root._oncreate.push(()=>{(async function(){const t=[];var e="";const{repositoryName:n}=this.get(),r=await fetch("/v2/"+n+"/tags/list").then(function(t){return e=t.headers.get("Docker-Distribution-Api-Version"),console.log(e),t.json()});for(var i=0;i<r.tags.length;i++){const e=r.tags[i];await fetch("/v2/"+n+"/manifests/"+e,{headers:{Accept:"application/vnd.docker.distribution.manifest.v2+json"}}).then(t=>t.json()).then(function(r){return fetch("/v2/"+n+"/blobs/"+r.config.digest,{headers:{Accept:r.config.mediaType}}).then(t=>t.json()).then(function(r){var i={tagName:e,repositoryName:n,createdAt:new Date(r.created)};return t.push(i),i})})}this.fire("version",{version:e}),this.set({tags:t})}).call(this),this.fire("update",{changed:n({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),v(this)),this._intro=!0}e(M.prototype,w),e(M.prototype,C);var R={itemDetails(t){console.log(t),this.set({isList:!1,repositoryName:t})},version(t){this.set({version:t})},close(){this.set({isList:!0})}};function P(t,e){var n,r={repositoryName:e.repositoryName},i=new M({root:t.root,store:t.store,data:r});return i.on("version",function(e){t.version(e.version)}),i.on("select",function(e){t.close()}),{c(){i._fragment.c()},m(t,e){i._mount(t,e),n=!0},p(t,e){var n={};t.repositoryName&&(n.repositoryName=e.repositoryName),i._set(n)},i(t,e){n||this.m(t,e)},o(t){n&&(i&&i._fragment.o(t),n=!1)},d(t){i.destroy(t)}}}function U(e,n){var r,i=new x({root:e.root,store:e.store});return i.on("version",function(t){e.version(t.version)}),i.on("select",function(t){e.itemDetails(t.repositoryName)}),{c(){i._fragment.c()},m(t,e){i._mount(t,e),r=!0},p:t,i(t,e){r||this.m(t,e)},o(t){r&&(i&&i._fragment.o(t),r=!1)},d(t){i.destroy(t)}}}function q(t){y(this,t),this._state=e({},t.data),this._intro=!!t.intro,this._fragment=function(t,e){var n,r,i,c,h,l,g,m,p,_,v,y,N,w,b,k,O,D,B,T,x,A,L,j;document.title=n=e.appTitle;var C=[U,P],V=[];function E(t){return t.isList?0:1}return w=E(e),b=V[w]=C[w](t,e),{c(){r=u("\n\n"),i=d("div"),c=d("div"),h=d("div"),l=d("h1"),g=u(e.name),m=u("\n\t\t"),p=d("div"),_=d("h1"),v=u(e.subtitle),y=u("\n\t"),N=d("div"),b.c(),k=u("\n\n\t"),O=d("div"),D=u("Registry Version: "),B=d("code"),T=u(e.version),x=u("\n\tUI Version: "),A=d("code"),L=u(e.uiVersion),h.className="six columns",p.className="six columns",c.className="row",N.className="row",O.className="row",i.className="container"},m(t,e){s(t,r,e),s(t,i,e),o(i,c),o(c,h),o(h,l),o(l,g),o(c,m),o(c,p),o(p,_),o(_,v),o(i,y),o(i,N),V[w].m(N,null),o(i,k),o(i,O),o(O,D),o(O,B),o(B,T),o(O,x),o(O,A),o(A,L),j=!0},p(e,r){j&&!e.appTitle||n===(n=r.appTitle)||(document.title=n),j&&!e.name||f(g,r.name),j&&!e.subtitle||f(v,r.subtitle);var i=w;(w=E(r))===i?V[w].p(e,r):(b.o(function(){V[i].d(1),V[i]=null}),(b=V[w])||(b=V[w]=C[w](t,r)).c(),b.m(N,null)),j&&!e.version||f(T,r.version),j&&!e.uiVersion||f(L,r.uiVersion)},i(t,e){j||this.m(t,e)},o(t){j&&(b?b.o(t):t(),j=!1)},d(t){t&&(a(r),a(i)),V[w].d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),v(this)),this._intro=!0}e(q.prototype,w),e(q.prototype,R);return new q({target:document.body,data:{name:"That Docker Registry",subtitle:"",item:null,isList:!0,appTitle:"That Docker Registry",repositoryName:null,version:"0.0",uiVersion:"1.0.0"}})}();
//# sourceMappingURL=bundle.js.map
